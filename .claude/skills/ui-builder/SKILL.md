---
name: UI Builder
description: This skill should be used when the user asks to "zaimplementuj widok", "implement view", "build ui from plan", "zbuduj ui dla", "wykonaj plan implementacji", or mentions implementing UI views from existing plans in docs/ui-sessions/. Reads implementation plans and generates React components with tests.
version: 1.0.0
---

# UI Builder

UI Builder is an implementation skill that reads plans from `docs/ui-sessions/<view>/` and generates React components, tests, and supporting files.

## Purpose

- Read implementation plans generated by ui-planner
- Generate React components following project patterns
- Create comprehensive tests (rendering, interactions, accessibility)
- Verify implementation with TypeScript and lint checks
- Report missing dependencies without auto-installing

## When to Use

Invoke this skill when:
- Implementation plan exists in `docs/ui-sessions/<view>/`
- User requests implementation of a planned view
- Need to generate components with full test coverage

**Prerequisite:** Run `ui-planner` first to create the plan.

## Workflow

### Step 1: Load Plan

Read the implementation plan from `docs/ui-sessions/<view>/`:

```bash
# Required files
docs/ui-sessions/<view>/
├── 01-requirements.md       # Requirements and constraints
├── 02-design-decisions.md   # UX decisions made during planning
└── 03-implementation-plan.md # File structure, components, order
```

Parse `03-implementation-plan.md` to extract:
- File Structure section
- Implementation Order section
- Component Specifications section
- Dependencies Check section

### Step 2: Verify Dependencies

Check required dependencies before implementation:

**Hooks:**
```bash
# Check if useServerAction hook exists
ls hooks/useServerAction.ts
```

**shadcn/ui components:**
```bash
# List installed components
ls components/ui/
```

**npm packages:**
```bash
# Check package.json for required packages
grep -E "lucide-react|react-hook-form|@hookform/resolvers" package.json
```

**Test dependencies (CRITICAL):**
```bash
# Check vitest-axe specifically - REQUIRED for accessibility tests
grep "vitest-axe" package.json

# Check other test packages
grep -E "vitest|@testing-library" package.json
```

**IMPORTANT:** If `vitest-axe` is missing:
1. **STOP implementation**
2. Report to user with install command
3. Wait for confirmation before proceeding

If dependencies are missing, report them to user:
```
⚠️ Missing dependencies detected:

Required for implementation:
- lucide-react (icons)

Required for tests (BLOCKING):
- vitest-axe (accessibility testing)

Install with: pnpm add -D vitest-axe && pnpm add lucide-react

Please install and confirm to continue.
```

**Do NOT auto-install.** Wait for user confirmation before proceeding.

### Step 3: Implement Components

Follow Implementation Order from the plan. For each component:

1. **Read specification** from Component Specifications section
2. **Generate code** following project patterns (see `references/component-patterns.md`)
3. **Create test file** with full coverage (see `references/test-patterns.md`)
4. **Write files** to specified locations

**File creation order matters:**
1. Shared components first (`components/ui/`)
2. Hooks if needed (`hooks/`)
3. View-specific components (`app/.../_ components/`)
4. Page files (`page.tsx`, `loading.tsx`)
5. Tests alongside components

### Step 4: Generate Tests

For each Client Component, create a `.test.tsx` file:

**Test categories:**
| Category | Tests |
|----------|-------|
| Rendering | Component renders, initial state correct |
| Validation | Each field validation, error messages |
| Interactions | User actions, loading states, success/error |
| Accessibility | axe-core scan, keyboard nav, focus |

**Test file location:**
- Same directory as component
- Named `ComponentName.test.tsx`

### Step 5: Verify Implementation

Run verification **only on new/modified files**:

```bash
# TypeScript check (whole project - required for type resolution)
pnpm exec tsc --noEmit

# Lint check - ONLY new files
pnpm lint app/(auth)/login/          # specific view folder
pnpm lint components/ui/password-input.tsx  # specific new files

# Run tests - ONLY new test files, NO coverage by default
pnpm test:run app/(auth)/login/_components/LoginForm.test.tsx
```

**Verification rules:**
- **TypeScript:** Run on whole project (needed for imports)
- **Lint:** Run ONLY on newly created files/folders
- **Tests:** Run ONLY new test files, WITHOUT coverage

**If tests fail:**
1. Fix the failing tests
2. Re-run only the fixed test file
3. Do NOT run coverage unless explicitly requested

### Step 6: Generate Report

Output implementation summary:

```markdown
## Implementation Report: <view>

### Files Created
- [x] app/(auth)/layout.tsx
- [x] app/(auth)/login/page.tsx
- [x] app/(auth)/login/loading.tsx
- [x] app/(auth)/login/_components/LoginForm.tsx
- [x] app/(auth)/login/_components/LoginForm.test.tsx
- [x] components/ui/password-input.tsx
- [x] components/ui/submit-button.tsx

### Verification
- [x] TypeScript: No errors
- [x] Lint: Passed
- [x] Tests: 8 passed

### Next Steps
- [ ] Manual testing: pnpm dev → http://localhost:3000/login
- [ ] Review generated code
```

## Project Patterns

### Component Structure

Follow patterns from `CLAUDE.md`:

**Client Components:**
- Use `'use client'` directive
- Functional components with hooks
- Props interface above component
- No `React.FC`

**Forms:**
- react-hook-form + zod
- zodResolver for validation
- useServerAction for submissions
- **REQUIRED:** Extract form logic to custom hook (e.g., `useLoginForm`)

**Server Actions:**
- Import from `@/services/<module>/actions`
- Use `isSuccess`/`isFailure` helpers

### File Naming

| Type | Convention | Example |
|------|------------|---------|
| Components | PascalCase | `LoginForm.tsx` |
| Tests | Component.test.tsx | `LoginForm.test.tsx` |
| Pages | lowercase | `page.tsx` |
| Hooks | camelCase | `useServerAction.ts` |

## Additional Resources

### Reference Files

- **`references/component-patterns.md`** - React component patterns (form, table, modal)
- **`references/file-templates.md`** - Templates for page.tsx, layout.tsx, loading.tsx
- **`references/test-patterns.md`** - Test patterns with Vitest + Testing Library
- **`references/verification-checklist.md`** - Post-implementation checklist

### Example Implementation

- **`examples/login-implementation/`** - Complete example of generated Login view

## Quick Reference

### Commands

```bash
# Implement a view
"zaimplementuj widok login"
"implement profile view"
"build ui from plan for workers"
```

### Prerequisites

Before running ui-builder:
1. Plan must exist in `docs/ui-sessions/<view>/`
2. Required shadcn/ui components installed
3. Test dependencies available

### Output Locations

| Type | Location |
|------|----------|
| Pages | `app/(<group>)/<view>/page.tsx` |
| Components | `app/(<group>)/<view>/_components/` |
| Shared UI | `components/ui/` |
| Tests | Same folder as component |
